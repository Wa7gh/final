{"ast":null,"code":"\"use strict\";\n\nfunction _interopRequireDefault(t) {\n  return t && t.__esModule ? t : {\n    \"default\": t\n  };\n}\n\nfunction _classCallCheck(t, e) {\n  if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n}\n\nfunction _possibleConstructorReturn(t, e) {\n  if (!t) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  return !e || \"object\" != typeof e && \"function\" != typeof e ? t : e;\n}\n\nfunction _inherits(t, e) {\n  if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof e);\n  t.prototype = Object.create(e && e.prototype, {\n    constructor: {\n      value: t,\n      enumerable: !1,\n      writable: !0,\n      configurable: !0\n    }\n  }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);\n}\n\nfunction isFloat(t) {\n  return t === Number(t) && t % 1 !== 0;\n}\n\nvar _extends = Object.assign || function (t) {\n  for (var e = 1; e < arguments.length; e++) {\n    var a = arguments[e];\n\n    for (var n in a) Object.prototype.hasOwnProperty.call(a, n) && (t[n] = a[n]);\n  }\n\n  return t;\n},\n    _createClass = function () {\n  function t(t, e) {\n    for (var a = 0; a < e.length; a++) {\n      var n = e[a];\n      n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(t, n.key, n);\n    }\n  }\n\n  return function (e, a, n) {\n    return a && t(e.prototype, a), n && t(e, n), e;\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: !0\n});\n\nvar _react = require(\"react\"),\n    _react2 = _interopRequireDefault(_react),\n    _reactDom = require(\"react-dom\"),\n    _reactDom2 = _interopRequireDefault(_reactDom),\n    _classnames = require(\"classnames\"),\n    _classnames2 = _interopRequireDefault(_classnames),\n    StarRating = function (t) {\n  function e(t) {\n    _classCallCheck(this, e);\n\n    var a = _possibleConstructorReturn(this, Object.getPrototypeOf(e).call(this, t));\n\n    return a.state = {\n      currentRatingVal: t.rating,\n      currentRatingPos: a.getStarRatingPosition(t.rating),\n      editing: t.editing || !0,\n      rating: t.rating,\n      pos: a.getStarRatingPosition(t.rating),\n      glyph: a.getStars(),\n      size: t.size\n    }, a;\n  }\n\n  return _inherits(e, t), _createClass(e, [{\n    key: \"componentWillMount\",\n    value: function () {\n      this.min = 0, this.max = this.props.totalStars || 5, this.props.rating && (this.state.editing = this.props.editing || !1);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function () {\n      this.root = _reactDom2[\"default\"].findDOMNode(this.refs.root), this.ratingContainer = _reactDom2[\"default\"].findDOMNode(this.refs.ratingContainer);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function () {\n      delete this.root, delete this.ratingContainer;\n    }\n  }, {\n    key: \"getStars\",\n    value: function () {\n      for (var t = \"\", e = this.props.totalStars, a = 0; e > a; a++) t += \"â˜…\";\n\n      return t;\n    }\n  }, {\n    key: \"getPosition\",\n    value: function (t) {\n      return t.clientX - this.root.getBoundingClientRect().left;\n    }\n  }, {\n    key: \"getWidthFromValue\",\n    value: function (t) {\n      var e = this.min,\n          a = this.max;\n      return e >= t || e === a ? 0 : t >= a ? 100 : 100 * (t - e) / (a - e);\n    }\n  }, {\n    key: \"applyPrecision\",\n    value: function (t, e) {\n      return parseFloat(t.toFixed(e));\n    }\n  }, {\n    key: \"getDecimalPlaces\",\n    value: function (t) {\n      var e = (\"\" + t).match(/(?:\\.(\\d+))?(?:[eE]([+-]?\\d+))?$/);\n      return e ? Math.max(0, (e[1] ? e[1].length : 0) - (e[2] ? +e[2] : 0)) : 0;\n    }\n  }, {\n    key: \"getValueFromPosition\",\n    value: function (t) {\n      var e = this.getDecimalPlaces(this.props.step),\n          a = this.ratingContainer.offsetWidth,\n          n = this.max - this.min,\n          r = n * t / (a * this.props.step);\n      r = Math.ceil(r);\n      var i = this.applyPrecision(parseFloat(this.min + r * this.props.step), e);\n      return i = Math.max(Math.min(i, this.max), this.min);\n    }\n  }, {\n    key: \"calculate\",\n    value: function (t) {\n      var e = this.getValueFromPosition(t),\n          a = this.getWidthFromValue(e);\n      return a += \"%\", {\n        width: a,\n        val: e\n      };\n    }\n  }, {\n    key: \"getStarRatingPosition\",\n    value: function (t) {\n      return this.getWidthFromValue(t) + \"%\";\n    }\n  }, {\n    key: \"getRatingEvent\",\n    value: function (t) {\n      var e = this.getPosition(t);\n      return this.calculate(e);\n    }\n  }, {\n    key: \"getSvg\",\n    value: function (t) {\n      for (var e = [], a = 0; a < this.props.totalStars; a++) {\n        var n = {};\n        n.transform = \"translate(\" + 50 * a + \", 0)\", n.fill = a + this.props.step <= t ? \"#FFA91B\" : \"#C6C6C6\", e.push(_react2[\"default\"].createElement(\"path\", _extends({}, n, {\n          key: \"star-\" + a,\n          mask: \"url(#half-star-mask)\",\n          d: \"m0,18.1l19.1,0l5.9,-18.1l5.9,18.1l19.1,0l-15.4,11.2l5.9,18.1l-15.4,-11.2l-15.4,11.2l5.9,-18.1l-15.4,-11.2l0,0z\"\n        })));\n      }\n\n      var r = {\n        width: e.length * this.props.size + \"px\",\n        height: this.props.size + \"px\"\n      };\n      return _react2[\"default\"].createElement(\"svg\", {\n        className: \"rsr__star\",\n        style: r,\n        viewBox: \"0 0 \" + e.length + \" 50\",\n        preserveAspectRatio: \"xMinYMin meet\",\n        version: \"1.1\",\n        xmlns: \"http://www.w3.org/2000/svg\"\n      }, _react2[\"default\"].createElement(\"g\", null, e.map(function (t) {\n        return t;\n      })));\n    }\n  }, {\n    key: \"updateRating\",\n    value: function (t, e) {\n      this.setState({\n        pos: t,\n        rating: e\n      });\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function (t, e) {\n      return t !== this.props ? (this.updateRating(this.getStarRatingPosition(t.rating), t.rating), !0) : e.currentRatingVal !== this.state.currentRatingVal || e.rating !== this.state.rating;\n    }\n  }, {\n    key: \"handleMouseLeave\",\n    value: function () {\n      this.setState({\n        pos: this.state.currentRatingPos,\n        rating: this.state.currentRatingVal\n      });\n    }\n  }, {\n    key: \"handleMouseMove\",\n    value: function (t) {\n      var e = this.getRatingEvent(t);\n      this.updateRating(e.width, e.val);\n    }\n  }, {\n    key: \"handleClick\",\n    value: function (t) {\n      if (this.props.disabled) return t.stopPropagation(), t.preventDefault(), !1;\n      var e = {\n        currentRatingPos: this.state.pos,\n        currentRatingVal: this.state.rating,\n        caption: this.props.caption,\n        name: this.props.name\n      };\n      this.setState(e), this.props.onRatingClick(t, {\n        rating: this.state.rating,\n        position: this.state.pos,\n        caption: this.props.caption,\n        name: this.props.name\n      });\n    }\n  }, {\n    key: \"treatName\",\n    value: function (t) {\n      return \"string\" == typeof t ? t.toLowerCase().split(\" \").join(\"_\") : void 0;\n    }\n  }, {\n    key: \"getClasses\",\n    value: function () {\n      return (0, _classnames2[\"default\"])({\n        \"rsr-root\": !0,\n        \"rsr--disabled\": this.props.disabled,\n        \"rsr--editing\": this.state.editing\n      });\n    }\n  }, {\n    key: \"getCaption\",\n    value: function () {\n      return this.props.caption ? _react2[\"default\"].createElement(\"span\", {\n        className: \"rsr__caption\"\n      }, this.props.caption) : null;\n    }\n  }, {\n    key: \"setAttrs\",\n    value: function () {\n      var t = {};\n      return this.state.editing && (t.onMouseMove = this.handleMouseMove.bind(this), t.onMouseLeave = this.handleMouseLeave.bind(this), t.onClick = this.handleClick.bind(this)), t;\n    }\n  }, {\n    key: \"render\",\n    value: function () {\n      var t = this.getClasses(),\n          e = this.getCaption(),\n          a = this.setAttrs();\n      return _react2[\"default\"].createElement(\"span\", {\n        className: \"rsr-container\"\n      }, e, _react2[\"default\"].createElement(\"div\", {\n        ref: \"root\",\n        className: t\n      }, _react2[\"default\"].createElement(\"div\", _extends({\n        ref: \"ratingContainer\",\n        className: \"rsr rating-gly-star\",\n        \"data-content\": this.state.glyph\n      }, a), this.getSvg(this.state.rating), _react2[\"default\"].createElement(\"input\", {\n        type: \"number\",\n        name: this.props.name,\n        value: this.state.currentRatingVal,\n        style: {\n          display: \"none !important\"\n        },\n        min: this.min,\n        max: this.max,\n        readOnly: !0\n      }))));\n    }\n  }]), e;\n}(_react2[\"default\"].Component);\n\nStarRating.propTypes = {\n  name: _react2[\"default\"].PropTypes.string.isRequired,\n  caption: _react2[\"default\"].PropTypes.string,\n  totalStars: _react2[\"default\"].PropTypes.number.isRequired,\n  rating: _react2[\"default\"].PropTypes.number,\n  onRatingClick: _react2[\"default\"].PropTypes.func,\n  disabled: _react2[\"default\"].PropTypes.bool,\n  editing: _react2[\"default\"].PropTypes.bool,\n  size: _react2[\"default\"].PropTypes.number\n}, StarRating.defaultProps = {\n  step: 1,\n  totalStars: 5,\n  onRatingClick: function () {},\n  disabled: !1,\n  size: 50,\n  rating: 0\n}, exports[\"default\"] = StarRating;","map":null,"metadata":{},"sourceType":"script"}